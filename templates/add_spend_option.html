{% extends "layout.html" %}

{%block title %}
    New spending
{% endblock %}

{% block main %}
    {% if warning == 'success' %}
    <div class="alert alert-success text-center" role="alert">
        Added!
    </div>
    {% elif warning == 'wrong_password' %}
    <div class="alert alert-danger text-center" role="alert">
        {{ message }}
    </div>
    {% endif %}
    <p>table trows = {{table_rows}} table = {{table}}</p> 
    <form action="/add_spend" method="POST">
        <div class="form-group row">
          <label for="item_bought" class="col-sm-2 col-form-label">Item</label>
          <div class="col-sm-10">
            <input type="text" class="form-control" id="item_bought" placeholder="Item" required>
          </div>
        </div>
        <div class="form-group row">
          <label for="store" class="col-sm-2 col-form-label">Price</label>
          <div class="col-sm-10">
            <input type="number" step=".01" min='0' class="form-control" id="store" placeholder="Price" required>
          </div>
        </div>
        <div class="form-group row">
            <label for="store" class="col-sm-2 col-form-label">Store</label>
            <div class="col-sm-10">
              <input type="integer" step=".01" class="form-control" id="store" value='-'>
            </div>
          </div>
          <div class="form-group row">
            <label for="payment" class="col-sm-2 col-form-label">Payment</label>
            <div class="col-sm-10">
              <input type="integer" step=".01" class="form-control" id="payment" value='-'>
            </div>
          </div>
          <div class="form-group row">
            <label for="obs" class="col-sm-2 col-form-label">Observation</label>
            <div class="col-sm-10">
              <input type="integer" step=".01" class="form-control" id="obs" value='-'>
            </div>
          </div>
          <div class="form-group col-4" >
            <select required class="form-control" id="choose_table" name="chosen_table" onchange='if(this.value != 0) { this.form.submit(); }'>
                {% if table == Null %}
                    <option> Select Table </option>
                {% else %}
                    <option> {{table}} </option>

                {% endif %}
                <option value="Monthly Budget">Monthly Budget</option>
                <option value="Daily Budget">Daily Budget</option>
              </select>
        </div>

        {% if table != Null %}
        <div class="form-group col-4">
            <select class="form-control" id="choose_table" name="chosen_table" required>
                {% for i in table_rows %}
                    {% for key, value in i.items() %}
                        {% if key == 'item' %}
                            <option>{{value}} </option>  
                        {% endif %} 
                    {% endfor %}  
                {% endfor %}                
              </select>
        </div>
        {% endif %}
        
        <div class="form-group row">
          <div class="col-sm-10">
            <button type="submit" class="btn btn-primary">Submit</button>
          </div>
        </div>
      </form>
{% endblock %}
